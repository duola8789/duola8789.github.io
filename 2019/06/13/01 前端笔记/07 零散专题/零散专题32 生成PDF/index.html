<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/logo-new.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha256-Z1K5uhUaJXA7Ll0XrZ/0JhX4lAtZFpT6jkKrEDT0drU=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"duola8789.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.14.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="JavaScript生成PDF方案调研，以及PDFKit调研。">
<meta property="og:type" content="article">
<meta property="og:title" content="零散专题32 生成PDF">
<meta property="og:url" content="https://duola8789.github.io/2019/06/13/01%20%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/07%20%E9%9B%B6%E6%95%A3%E4%B8%93%E9%A2%98/%E9%9B%B6%E6%95%A3%E4%B8%93%E9%A2%9832%20%E7%94%9F%E6%88%90PDF/index.html">
<meta property="og:site_name" content="不负时光">
<meta property="og:description" content="JavaScript生成PDF方案调研，以及PDFKit调研。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://image.oldzhou.cn/FgCmy8HU_S_RSbq0ZY_oEy3WxNmU">
<meta property="og:image" content="http://image.oldzhou.cn/Fk5M94-QfYdoMI7tgsssP9V5uOOc">
<meta property="og:image" content="http://image.oldzhou.cn/FsxXEsYK8TDrObBVxVyTo0X9Efbb">
<meta property="og:image" content="http://image.oldzhou.cn/FnONkQ8gOQcW9qpcUvm1dzFriA-X">
<meta property="og:image" content="http://image.oldzhou.cn/Fk5xy4jbX0W9miIfYazZaXJo9W2e">
<meta property="og:image" content="http://image.oldzhou.cn/FgVNwesxXwj9PE028GP8y_5eHoFe">
<meta property="og:image" content="http://image.oldzhou.cn/Fr8W2cCb6LWOlefYslkMJ_lzOHxF">
<meta property="og:image" content="http://image.oldzhou.cn/FlAFrCFiMipWd__j5l6uAo2LQSig">
<meta property="og:image" content="http://image.oldzhou.cn/FlAFrCFiMipWd__j5l6uAo2LQSig">
<meta property="og:image" content="http://image.oldzhou.cn/FrZ0qQEPazKcik5NHqAe5Xu6YGJb">
<meta property="og:image" content="http://image.oldzhou.cn/FldaGQ86hOl_VV55eP3B9DWfZTQv">
<meta property="og:image" content="http://image.oldzhou.cn/FlohKekaDPiBLfLmIkpf5QZR89lW">
<meta property="og:image" content="http://image.oldzhou.cn/FlTa2RQUmatR2mxjGxYk4mQG5V1-">
<meta property="og:image" content="http://image.oldzhou.cn/FmhmIgKC8zb_csCziYnBeIHM7L55">
<meta property="og:image" content="http://image.oldzhou.cn/FoO-Ir5HZ4L3pQ2-8mkztiE3BJpd">
<meta property="og:image" content="http://image.oldzhou.cn/FliCkx15NIvWJu8mTiqD5gdwPk8E">
<meta property="og:image" content="http://image.oldzhou.cn/FtDqgX2AtSt8RgemNVjVr_Q4vN8t">
<meta property="article:published_time" content="2019-06-13T08:59:43.000Z">
<meta property="article:modified_time" content="2019-06-14T10:42:03.000Z">
<meta property="article:author" content="多啦大薯片">
<meta property="article:tag" content="PDF">
<meta property="article:tag" content="PDFKit">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://image.oldzhou.cn/FgCmy8HU_S_RSbq0ZY_oEy3WxNmU">


<link rel="canonical" href="https://duola8789.github.io/2019/06/13/01%20%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/07%20%E9%9B%B6%E6%95%A3%E4%B8%93%E9%A2%98/%E9%9B%B6%E6%95%A3%E4%B8%93%E9%A2%9832%20%E7%94%9F%E6%88%90PDF/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://duola8789.github.io/2019/06/13/01%20%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/07%20%E9%9B%B6%E6%95%A3%E4%B8%93%E9%A2%98/%E9%9B%B6%E6%95%A3%E4%B8%93%E9%A2%9832%20%E7%94%9F%E6%88%90PDF/","path":"2019/06/13/01 前端笔记/07 零散专题/零散专题32 生成PDF/","title":"零散专题32 生成PDF"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>零散专题32 生成PDF | 不负时光</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">不负时光</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">少年回头望，笑我还不快跟上</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-about"><a href="http://www.oldzhou.cn/pages/page1.html" rel="section" target="_blank"><i class="fa fa-user fa-fw"></i>关于</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%9F%E6%88%90pdf%E7%9A%84%E6%96%B9%E6%A1%88"><span class="nav-number">1.</span> <span class="nav-text">生成pdf的方案</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PDFKit"><span class="nav-number">2.</span> <span class="nav-text">PDFKit</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">2.1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="nav-number">2.2.</span> <span class="nav-text">在浏览器中使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E9%A1%B5%E9%9D%A2"><span class="nav-number">2.3.</span> <span class="nav-text">添加页面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bufferPage"><span class="nav-number">2.4.</span> <span class="nav-text">bufferPage</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E5%AE%9A%E6%96%87%E6%A1%A3%E5%9F%BA%E7%A1%80%E4%BF%A1%E6%81%AF"><span class="nav-number">2.5.</span> <span class="nav-text">设定文档基础信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A0%E5%AF%86%E5%92%8C%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90"><span class="nav-number">2.6.</span> <span class="nav-text">加密和访问权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A2%E9%87%8F%E5%9B%BE%E5%BD%A2"><span class="nav-number">2.7.</span> <span class="nav-text">矢量图形</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SVG%E8%B7%AF%E5%BE%84"><span class="nav-number">2.8.</span> <span class="nav-text">SVG路径</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%BE%E5%BD%A2%E5%B0%8F%E5%8A%A9%E6%89%8B"><span class="nav-number">2.9.</span> <span class="nav-text">图形小助手</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BE%B9%E6%A1%86%E5%92%8C%E5%A1%AB%E5%85%85%E6%A0%B7%E5%BC%8F"><span class="nav-number">3.</span> <span class="nav-text">边框和填充样式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%99%9A%E7%BA%BF"><span class="nav-number">3.1.</span> <span class="nav-text">虚线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%9C%E8%89%B2"><span class="nav-number">3.2.</span> <span class="nav-text">颜色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%90%E5%8F%98"><span class="nav-number">3.3.</span> <span class="nav-text">渐变</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%9D%E5%AD%98%E6%81%A2%E5%A4%8D%E5%9B%BE%E5%BD%A2%E5%A0%86%E6%A0%88"><span class="nav-number">3.4.</span> <span class="nav-text">保存恢复图形堆栈</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A7%BB%E5%8A%A8"><span class="nav-number">3.5.</span> <span class="nav-text">移动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%AA%E5%88%87"><span class="nav-number">3.6.</span> <span class="nav-text">剪切</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E5%AD%97"><span class="nav-number">3.7.</span> <span class="nav-text">文字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E5%AD%97%E6%8D%A2%E8%A1%8C%E5%92%8C%E5%AF%B9%E5%85%B6"><span class="nav-number">3.8.</span> <span class="nav-text">文字换行和对其</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E5%AD%97%E6%A0%B7%E5%BC%8F"><span class="nav-number">3.9.</span> <span class="nav-text">文字样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E5%AD%97%E6%B5%8B%E9%87%8F"><span class="nav-number">3.10.</span> <span class="nav-text">文字测量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%97%E8%A1%A8"><span class="nav-number">3.11.</span> <span class="nav-text">列表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%8C%E6%96%87%E6%9C%AC"><span class="nav-number">3.12.</span> <span class="nav-text">富文本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E4%BD%93"><span class="nav-number">3.13.</span> <span class="nav-text">字体</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%BE%E5%83%8F"><span class="nav-number">3.14.</span> <span class="nav-text">图像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E9%87%8A"><span class="nav-number">3.15.</span> <span class="nav-text">注释</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pdfmake"><span class="nav-number">4.</span> <span class="nav-text">pdfmake</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">4.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8"><span class="nav-number">4.2.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BB%E6%B5%81%E7%A8%8B"><span class="nav-number">4.3.</span> <span class="nav-text">主流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E4%BD%93-1"><span class="nav-number">4.4.</span> <span class="nav-text">字体</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%BB%98%E8%AE%A4%E6%A0%B7%E5%BC%8F"><span class="nav-number">4.5.</span> <span class="nav-text">默认样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E5%86%8C%E9%A2%84%E7%BD%AE%E6%A0%B7%E5%BC%8F"><span class="nav-number">4.6.</span> <span class="nav-text">注册预置样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B0%B4%E5%8D%B0"><span class="nav-number">4.7.</span> <span class="nav-text">水印</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%87%E9%A2%98"><span class="nav-number">4.8.</span> <span class="nav-text">标题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E5%89%B2%E7%BA%BF"><span class="nav-number">4.9.</span> <span class="nav-text">分割线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A6%82%E8%A7%88%E4%BF%A1%E6%81%AF"><span class="nav-number">4.10.</span> <span class="nav-text">概览信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%A8%E6%A0%BC"><span class="nav-number">4.11.</span> <span class="nav-text">表格</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">5.</span> <span class="nav-text">总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">6.</span> <span class="nav-text">参考</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="多啦大薯片"
      src="/images/avatar3.png">
  <p class="site-author-name" itemprop="name">多啦大薯片</p>
  <div class="site-description" itemprop="description">欲买桂花同载酒，终不似，少年游</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">210</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">281</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/duola8789" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;duola8789" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:duola8789@126.com" title="E-Mail → mailto:duola8789@126.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/zhouhaozhouhao" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;zhouhaozhouhao" rel="noopener me" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.douban.com/people/aisheishei2011" title="Douban → https:&#x2F;&#x2F;www.douban.com&#x2F;people&#x2F;aisheishei2011" rel="noopener me" target="_blank"><i class="fa fa-book fa-fw"></i>Douban</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://duola8789.github.io/2019/06/13/01%20%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/07%20%E9%9B%B6%E6%95%A3%E4%B8%93%E9%A2%98/%E9%9B%B6%E6%95%A3%E4%B8%93%E9%A2%9832%20%E7%94%9F%E6%88%90PDF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar3.png">
      <meta itemprop="name" content="多啦大薯片">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不负时光">
      <meta itemprop="description" content="欲买桂花同载酒，终不似，少年游">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="零散专题32 生成PDF | 不负时光">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          零散专题32 生成PDF
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-13 16:59:43" itemprop="dateCreated datePublished" datetime="2019-06-13T16:59:43+08:00">2019-06-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-06-14 18:42:03" itemprop="dateModified" datetime="2019-06-14T18:42:03+08:00">2019-06-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%85%B6%E4%BB%96/" itemprop="url" rel="index"><span itemprop="name">其他</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>JavaScript生成PDF方案调研，以及PDFKit调研。</p>
<span id="more"></span>

<h2 id="生成pdf的方案"><a href="#生成pdf的方案" class="headerlink" title="生成pdf的方案"></a>生成pdf的方案</h2><p>（1）JSPDF(前端生成 )</p>
<ul>
<li>优点：不需要服务端安装无头浏览器，使用CSS方便控制样式，生成的PDF文字可复制</li>
<li>缺点：对中文支持不好</li>
</ul>
<p>（2）PDFKit( 服务端生成)</p>
<ul>
<li>优点：服务端直接解决，生成的PDF文字可复制，通过引入字体，可支持中文</li>
<li>缺点：样式控制复杂</li>
</ul>
<p>（3）node-html-pdf(服务端生成)</p>
<ul>
<li>优点：服务端通过控制HTML模板生成PDF，支持中文，样式控制方便</li>
<li>缺点：不支持图片，需要安装无头浏览器，性能有隐患</li>
</ul>
<p>（4）JSPDF + HTMLToCanvas(前端生成)</p>
<ul>
<li>优点：样式控制方便，支持中文，比较美观</li>
<li>缺点：生成的PDF内容是图片，无法复制</li>
</ul>
<p>（5） 使用打印(前端生成)</p>
<ul>
<li>优点：简单，代码量少</li>
<li>缺点：需要引导用户，且不美观</li>
</ul>
<h2 id="PDFKit"><a href="#PDFKit" class="headerlink" title="PDFKit"></a>PDFKit</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p><a target="_blank" rel="noopener" href="http://pdfkit.org/">PDFKit</a>使用来在Node服务端生成PDF文件的JS包（也支持在浏览器使用），它可以轻松生成复杂的、多页的、可打印的PDF文档。</p>
<p>它的API是链式语法，与操作Canvas的API有一些类似</p>
<p>安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install pdfkit -S</span><br></pre></td></tr></table></figure>

<p>创建PDFKit文档很容易：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">PDFDocument</span> = <span class="built_in">require</span>(<span class="string">&#x27;pdfkit&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> doc = <span class="keyword">new</span> <span class="title class_">PDFDocument</span>();</span><br></pre></td></tr></table></figure>

<p>PDFDocument实例是可读的Node流，它不会自动的保存，但是可以使用<code>pipe</code>方法将输出的PDF文档传递给另一个可写的Node流。当PDF文档编写成功后，调用<code>end</code>方法来结束流程。下面的例子来展示如何将生成的文档传递给PDF文件或者HTTP响应：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">doc.<span class="title function_">pipe</span>(fs.<span class="title function_">createWriteStream</span>(<span class="string">&#x27;/path/to/file.pdf&#x27;</span>)); <span class="comment">// 写入PDF文件</span></span><br><span class="line">doc.<span class="title function_">pipe</span>(res);                                       <span class="comment">// 传递给HTTP响应</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用后面介绍的API来为PDF添加内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 结束编辑，关闭流</span></span><br><span class="line">doc.<span class="title function_">end</span>();</span><br></pre></td></tr></table></figure>

<h3 id="在浏览器中使用"><a href="#在浏览器中使用" class="headerlink" title="在浏览器中使用"></a>在浏览器中使用</h3><p>PDFKit的0.6版本后支持在浏览器中使用，有两种方法在浏览器端使用PDFKit，一种是在浏览器端使用<a target="_blank" rel="noopener" href="http://browserify.org/">browserify</a>加载Node模块，另一种方法是直接使用PDFKit的预编译版本，可以从<a target="_blank" rel="noopener" href="https://github.com/foliojs/pdfkit/releases">Github上下载</a>。</p>
<p>在浏览器端使用PDFKit和Node中使用的唯一区别就是输出结果，在浏览器端输出结果必须是浏览器支持的格式，比如<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Blob">Blob</a>。Blob格式可以允许浏览器在一个iframe中直接展示生成的PDF文档，或者将PDF上传到服务器，或者让用户下载它。</p>
<p>将PDFDcument输出为Blob格式，需要将他传递给<a target="_blank" rel="noopener" href="https://github.com/devongovett/blob-stream">blob-stream</a>，这个模块可以将Node的流转换为Blob。下面的例子使用了Browserify来加载PDFKit和blob-stram（如果没有使用Browserify可以直接使用<code>&lt;script&gt;</code>标签代替）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入依赖</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">PDFDocument</span> = <span class="built_in">require</span>(<span class="string">&#x27;pdfkit&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> blobStream  = <span class="built_in">require</span>(<span class="string">&#x27;blob-stream&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建文档</span></span><br><span class="line"><span class="keyword">const</span> doc = <span class="keyword">new</span> <span class="title class_">PDFDocument</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 传递给Blob</span></span><br><span class="line"><span class="keyword">const</span> stream = doc.<span class="title function_">pipe</span>(<span class="title function_">blobStream</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在这里添加PDF的内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 结束时得到的是Blob</span></span><br><span class="line">doc.<span class="title function_">end</span>();</span><br><span class="line"></span><br><span class="line">stream.<span class="title function_">on</span>(<span class="string">&#x27;finish&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 将blob转换为PDF文档</span></span><br><span class="line">  <span class="keyword">const</span> blob = stream.<span class="title function_">toBlob</span>(<span class="string">&#x27;application/pdf&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 或者得到Blob URL，直接在浏览器中展示</span></span><br><span class="line">  <span class="keyword">const</span> url = stream.<span class="title function_">toBlobURL</span>(<span class="string">&#x27;application/pdf&#x27;</span>);</span><br><span class="line">  iframe.<span class="property">src</span> = url;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="添加页面"><a href="#添加页面" class="headerlink" title="添加页面"></a>添加页面</h3><p>PDFKit文档的第一页是在创建文档时自动添加的，除非使用了<code>autoFirstPage: false</code>选项。后续的页面必须手动添加：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">doc.<span class="title function_">addPage</span>()</span><br></pre></td></tr></table></figure>

<p>可以使用<code>pageAdded</code>事件，让每个页面创建后都添加上相同的内容：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">doc.<span class="title function_">on</span>(<span class="string">&#x27;pageAdded&#x27;</span>, <span class="function">() =&gt;</span> doc.<span class="title function_">text</span>(<span class="string">&quot;Page Title&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>可以通过为<code>addPage</code>传递参数设置页面的尺寸、方向：</p>
<ul>
<li><code>layout</code>，页面方向，可取值<code>portrait</code>（默认值）&#x2F;<code>landscape</code></li>
<li><code>size</code>，页面尺寸，取值是一个数组<code>[宽, 高]</code>，单位是PDF的点（1&#x2F;72英寸）。可以传入字符串指定一些<a target="_blank" rel="noopener" href="https://github.com/foliojs/pdfkit/blob/b13423bf0a391ed1c33a2e277bc06c00cabd6bf9/lib/page.coffee#L72-L122">预设值</a>，默认值是<code>letter</code></li>
<li><code>margin</code>，设定页边距，可以设为一个数字，那么各边距都等于它，也可以设为一个对象，分<code>top</code>&#x2F;<code>left</code>&#x2F;<code>bottom</code>&#x2F;<code>right</code>四个属性分别设定各边距</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Add a 50 point margin on all sides</span></span><br><span class="line">doc.<span class="title function_">addPage</span>(&#123;</span><br><span class="line">  <span class="attr">margin</span>: <span class="number">50</span>&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Add different margins on each side</span></span><br><span class="line">doc.<span class="title function_">addPage</span>(&#123;</span><br><span class="line">  <span class="attr">margins</span>: &#123;</span><br><span class="line">    <span class="attr">top</span>: <span class="number">50</span>,</span><br><span class="line">    <span class="attr">bottom</span>: <span class="number">50</span>,</span><br><span class="line">    <span class="attr">left</span>: <span class="number">72</span>,</span><br><span class="line">    <span class="attr">right</span>: <span class="number">72</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>给PDFDocument构造函数传递页面参数对象，可以设置每一页的默认尺寸和布局，<strong>它会被每个<code>addPage</code>传递的页面参数覆盖</strong>。</p>
<h3 id="bufferPage"><a href="#bufferPage" class="headerlink" title="bufferPage"></a><code>bufferPage</code></h3><p>有的时候需要在后面的页面完成后回到前面的页面，对前面的页面进行修改，可以在PDFDocument构造函数传递一个参数<code>bufferPages: true</code>，来手动控制页面流。</p>
<p>一般这个情况可能不多见，具体可以参考<a target="_blank" rel="noopener" href="http://pdfkit.org/docs/getting_started.html#switching_to_previous_pages">文档这部分内容</a>。</p>
<h3 id="设定文档基础信息"><a href="#设定文档基础信息" class="headerlink" title="设定文档基础信息"></a>设定文档基础信息</h3><p>基础信息包括标题、作者等，可以通过对<code>doc.info</code>赋值，也可以在创建文档时传递参数实现。可以设定的基础信息包括（需要首字母大写）<code>Title</code>&#x2F;<code>Author</code>&#x2F;<code>Subject</code>&#x2F;<code>Keywords</code>&#x2F;<code>CreationDate</code>&#x2F;<code>ModDate</code></p>
<h3 id="加密和访问权限"><a href="#加密和访问权限" class="headerlink" title="加密和访问权限"></a>加密和访问权限</h3><p>可以对PDF加密，并且使用密码打开文件。也可以设定PDF文件的访问权限。具体内容<a target="_blank" rel="noopener" href="http://pdfkit.org/docs/getting_started.html#encryption_and_access_privileges">参考文档</a>。</p>
<h3 id="矢量图形"><a href="#矢量图形" class="headerlink" title="矢量图形"></a>矢量图形</h3><p>PDF格式兼容矢量图形，PDFKit提供了类似于HTML5 Canvas的API来创建矢量图形。图形通过一些列的直线和曲线构成，看一个例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">doc.<span class="title function_">moveTo</span>(<span class="number">0</span>, <span class="number">20</span>)                              <span class="comment">// 设定起点</span></span><br><span class="line">  .<span class="title function_">lineTo</span>(<span class="number">100</span>, <span class="number">160</span>)                            <span class="comment">// 直线</span></span><br><span class="line">  .<span class="title function_">quadraticCurveTo</span>(<span class="number">130</span>, <span class="number">200</span>, <span class="number">150</span>, <span class="number">120</span>)        <span class="comment">// 二次曲线</span></span><br><span class="line">  .<span class="title function_">bezierCurveTo</span>(<span class="number">190</span>, -<span class="number">40</span>, <span class="number">200</span>, <span class="number">200</span>, <span class="number">300</span>, <span class="number">150</span>) <span class="comment">// 贝塞尔曲线</span></span><br><span class="line">  .<span class="title function_">lineTo</span>(<span class="number">400</span>, <span class="number">90</span>)                             <span class="comment">// 直线</span></span><br><span class="line">  .<span class="title function_">stroke</span>();                                   <span class="comment">// 画</span></span><br></pre></td></tr></table></figure>

<p><img src="http://image.oldzhou.cn/FgCmy8HU_S_RSbq0ZY_oEy3WxNmU"></p>
<h3 id="SVG路径"><a href="#SVG路径" class="headerlink" title="SVG路径"></a>SVG路径</h3><p>PDFKit包含了SVG路径解析器，所以可以使用SVG路径画出一个图形，上面的图形使用SVG路径同样可以实现：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">doc.<span class="title function_">path</span>(<span class="string">&#x27;M 0,20 L 100,160 Q 130,200 150,120 C 190,-40 200,200 300,150 L 400,90&#x27;</span>)</span><br><span class="line">  .<span class="title function_">stroke</span>()</span><br></pre></td></tr></table></figure>

<h3 id="图形小助手"><a href="#图形小助手" class="headerlink" title="图形小助手"></a>图形小助手</h3><p>PDFKit提供了一些封装好的方法来画出一些常用的图形，包括：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 长方形 </span></span><br><span class="line"><span class="title function_">rect</span>(x, y, width, height) </span><br><span class="line"><span class="comment">// 圆角长方形</span></span><br><span class="line"><span class="title function_">roundedRect</span>(x, y, width, height, cornerRadius) </span><br><span class="line"><span class="comment">// 椭圆</span></span><br><span class="line"><span class="title function_">ellipse</span>(centerX, centerY, radiusX, radiusY = radiusX) </span><br><span class="line"><span class="comment">// 圆形</span></span><br><span class="line"><span class="title function_">circle</span>(centerX, centerY, radius) </span><br><span class="line"><span class="comment">// 多边形</span></span><br><span class="line"><span class="title function_">polygon</span>(points...) </span><br></pre></td></tr></table></figure>
<p>使用<code>ploygon</code>方法通过传输一系列由横纵坐标组成的数组，会创建一系列的直线，并连起来成为多边形：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">doc.<span class="title function_">polygon</span>([<span class="number">100</span>, <span class="number">100</span>], [<span class="number">200</span>, <span class="number">200</span>], [<span class="number">200</span>, <span class="number">300</span>])</span><br><span class="line">  .<span class="title function_">stroke</span>()</span><br></pre></td></tr></table></figure>

<p><img src="http://image.oldzhou.cn/Fk5M94-QfYdoMI7tgsssP9V5uOOc"></p>
<h2 id="边框和填充样式"><a href="#边框和填充样式" class="headerlink" title="边框和填充样式"></a>边框和填充样式</h2><p>使用<code>storke</code>是画线，使用<code>fill</code>画出来的是填满空间的实体，使用<code>fillAndStroke</code>同时实现：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">doc.<span class="title function_">polygon</span>([<span class="number">100</span>, <span class="number">100</span>], [<span class="number">200</span>, <span class="number">200</span>], [<span class="number">200</span>, <span class="number">300</span>]).<span class="title function_">fillAndStroke</span>(<span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;red&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="http://image.oldzhou.cn/FsxXEsYK8TDrObBVxVyTo0X9Efbb"></p>
<p>PDFKit可以设定的属性有：</p>
<ul>
<li><code>lineWidth</code></li>
<li><code>lineCap</code></li>
<li><code>lineJoin</code></li>
<li><code>miterLimit</code></li>
<li><code>dash</code></li>
<li><code>fillColor</code></li>
<li><code>strokeColor</code></li>
<li><code>opacity</code></li>
<li><code>fillOpacity</code></li>
<li><code>strokeOpacity</code></li>
</ul>
<p>其中<code>lineCap</code>用来设定直线的端点形状，可取值有<code>butt</code>&#x2F;<code>round</code>&#x2F;<code>square</code>，<code>lineJoin</code>用来设定直线交汇处的形状，可取值有<code>miter</code>&#x2F;<code>round</code>&#x2F;<code>bevel</code></p>
<p><img src="http://image.oldzhou.cn/FnONkQ8gOQcW9qpcUvm1dzFriA-X"></p>
<h3 id="虚线"><a href="#虚线" class="headerlink" title="虚线"></a>虚线</h3><p>使用<code>dash</code>方法画虚线：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">doc.<span class="title function_">circle</span>(<span class="number">100</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">  .<span class="title function_">dash</span>(<span class="number">5</span>, &#123; <span class="attr">space</span>: <span class="number">10</span> &#125;)</span><br><span class="line">  .<span class="title function_">stroke</span>();</span><br></pre></td></tr></table></figure>
<p>dash接受的第一个参数是每一段虚线的长度，第二个参数是一个选项对象，其中<code>space</code>属性用来指定每个虚线段的间隔，默认值与虚线段长度相等，<code>phase</code>属性指定虚线段的起点（不知道有什么用）</p>
<p>当使用<code>dash</code>方法后，后续的直线都是虚线的，可以使用<code>undash</code>方法恢复实现：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">doc.<span class="title function_">moveTo</span>(<span class="number">100</span>, <span class="number">50</span>)</span><br><span class="line">  .<span class="title function_">lineTo</span>(<span class="number">100</span>, <span class="number">150</span>)</span><br><span class="line">  .<span class="title function_">dash</span>(<span class="number">5</span>, &#123; <span class="attr">space</span>: <span class="number">10</span>, <span class="attr">phase</span>: <span class="number">10</span> &#125;)</span><br><span class="line">  .<span class="title function_">stroke</span>();</span><br><span class="line"></span><br><span class="line">doc.<span class="title function_">moveTo</span>(<span class="number">100</span>, <span class="number">150</span>)</span><br><span class="line">  .<span class="title function_">lineTo</span>(<span class="number">300</span>, <span class="number">150</span>)</span><br><span class="line">  .<span class="title function_">undash</span>()</span><br><span class="line">  .<span class="title function_">stroke</span>();</span><br></pre></td></tr></table></figure>

<p><img src="http://image.oldzhou.cn/Fk5xy4jbX0W9miIfYazZaXJo9W2e"></p>
<h3 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h3><p>可以使用一个数组表示RGB或者CMYK颜色，或者字符串的16进制颜色或者CSS颜色的名称</p>
<p><code>fill</code>和<code>stroke</code>方法的参数可以指定颜色，也可以使用<code>fillColor</code>和<code>strokeColor</code>来指定颜色，第一个参数是颜色，第二个参数是透明度</p>
<p>也可以使用<code>fillOpacity</code>、<code>strokeOpacity</code>或者<code>opacity</code>来单独指定透明度</p>
<h3 id="渐变"><a href="#渐变" class="headerlink" title="渐变"></a>渐变</h3><p>使用<code>linearGradient</code>和<code>radialGradient</code>实现渐变色，详见<a target="_blank" rel="noopener" href="http://pdfkit.org/docs/vector.html#gradients">文档</a>。</p>
<h3 id="保存恢复图形堆栈"><a href="#保存恢复图形堆栈" class="headerlink" title="保存恢复图形堆栈"></a>保存恢复图形堆栈</h3><p>图形堆栈是所有创建的样式和移动的快照，每次调用<code>save</code>方法当前的图形堆栈就会被推入一个堆栈中，当调用<code>restore</code>方法后，堆栈中的最后一个状态就会被应用到环境中。</p>
<p>所以，你可以保存状态，改变一些样式，然后恢复到之前的状态。</p>
<h3 id="移动"><a href="#移动" class="headerlink" title="移动"></a>移动</h3><p>通过移动，可以再不改变图形本身的基础上，改变图形的样式。有三种移动的类型可用：<code>translate</code>&#x2F;<code>rotate</code>&#x2F;<code>sacle</code></p>
<p>详见<a target="_blank" rel="noopener" href="http://pdfkit.org/docs/vector.html#transformations">文档</a>。</p>
<h3 id="剪切"><a href="#剪切" class="headerlink" title="剪切"></a>剪切</h3><p>途径剪切与填充（fill）和连线（stroke）不同，它是一个蒙版，会隐藏掉图形中不想要的部分。</p>
<p>所有落在剪切路径内部的图形都是可见的，外部的都是不可见的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create a clipping path</span></span><br><span class="line">doc.<span class="title function_">circle</span>(<span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">   .<span class="title function_">clip</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Draw a checkerboard pattern</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> row = <span class="number">0</span>; row &lt; <span class="number">10</span>; row++) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> col = <span class="number">0</span>; col &lt; <span class="number">10</span>; col++) &#123;</span><br><span class="line">    <span class="keyword">const</span> color = (col % <span class="number">2</span>) - (row % <span class="number">2</span>) ? <span class="string">&#x27;#eee&#x27;</span> : <span class="string">&#x27;#4183C4&#x27;</span>;</span><br><span class="line">    doc.<span class="title function_">rect</span>(row * <span class="number">20</span>, col * <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>)</span><br><span class="line">       .<span class="title function_">fill</span>(color);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><img src="http://image.oldzhou.cn/FgVNwesxXwj9PE028GP8y_5eHoFe"></p>
<p>想要取消剪切，需要在<code>clip</code>之前调用<code>save</code>方法，完成剪切部分的操作后调用<code>restore</code>方法。</p>
<h3 id="文字"><a href="#文字" class="headerlink" title="文字"></a>文字</h3><p>使用<code>text</code>方法添加文字</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">doc.<span class="title function_">text</span>(<span class="string">&#x27;Hello world!&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>每次调用<code>text</code>方法都会另起一行，并且自动与之前行的位置对其。可以为<code>text</code>方法传两个参数，指定其位置。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">doc.<span class="title function_">text</span>(<span class="string">&#x27;hello1&#x27;</span>);</span><br><span class="line">doc.<span class="title function_">text</span>(<span class="string">&#x27;hello2&#x27;</span>).<span class="title function_">text</span>(<span class="string">&#x27;hello3&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p><img src="http://image.oldzhou.cn/Fr8W2cCb6LWOlefYslkMJ_lzOHxF"></p>
<p>可以调用<code>moveDown</code>或<code>moveUp</code>方法来按行移动</p>
<h3 id="文字换行和对其"><a href="#文字换行和对其" class="headerlink" title="文字换行和对其"></a>文字换行和对其</h3><p><code>text</code>方法接受一个对象作为参数，用来指定一些配置项。</p>
<p>在不传递任何参数的情况下，<code>text</code>方法生成的文字横向沿着页面的左边距排放，纵向沿着页面上边距摆放，后续文字排在已有文字的下方。</p>
<p>PDFKit会根据文字内容，自动添加下一页，无需手动控制。</p>
<p>PDFKit还提供了文字折行的功能。文字会自动换行，除非指定<code>lineBreak</code>为<code>false</code>。默认情况下文字遇到页面边距会换行，但是指定<code>width</code>属性会让文字按照不同的宽度换行。如果指定了<code>height</code>属性，文字会调整到能放下的最多的行数，多余的行会被剪切</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">doc.<span class="title function_">text</span>(t, &#123;</span><br><span class="line">  <span class="attr">width</span>: <span class="number">200</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><img src="http://image.oldzhou.cn/FlAFrCFiMipWd__j5l6uAo2LQSig"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">doc.<span class="title function_">text</span>(t, &#123;</span><br><span class="line">  <span class="attr">width</span>: <span class="number">200</span>,</span><br><span class="line">  height <span class="number">200</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="http://image.oldzhou.cn/FlAFrCFiMipWd__j5l6uAo2LQSig"></p>
<p>当文字在允许换行时，可以通过<code>align</code>属性指定对其方式，可取的值有<code>left</code>&#x2F;<code>right</code>&#x2F;<code>center</code>&#x2F;<code>justify</code></p>
<h3 id="文字样式"><a href="#文字样式" class="headerlink" title="文字样式"></a>文字样式</h3><p><code>text</code>接受一系列的参数来指定文字样式。</p>
<p><img src="http://image.oldzhou.cn/FrZ0qQEPazKcik5NHqAe5Xu6YGJb"></p>
<p><code>ellipsis</code>为<code>true</code>时用来指定当文字太长时用省略号来代替多余的文字，可以传入字符串指定代替的字符</p>
<p>使用<code>columns</code>和<code>columnGap</code>来将文字按列排布</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">doc.<span class="title function_">fillColor</span>(<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">  .<span class="title function_">text</span>(t, &#123;</span><br><span class="line">  <span class="attr">columns</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">columnGap</span>: <span class="number">15</span>,</span><br><span class="line">  <span class="attr">height</span>: <span class="number">100</span>,</span><br><span class="line">  <span class="attr">width</span>: <span class="number">300</span>,</span><br><span class="line">  <span class="attr">align</span>: <span class="string">&#x27;justify&#x27;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><img src="http://image.oldzhou.cn/FldaGQ86hOl_VV55eP3B9DWfZTQv"></p>
<h3 id="文字测量"><a href="#文字测量" class="headerlink" title="文字测量"></a>文字测量</h3><p>当文档需要精确的布局时，需要知道一段文字的尺寸，可以使用<code>widthOfString(text, options)</code>和<code>heightOfString(text, options)</code>方法</p>
<p>这两个方法不会绘制文字，只会返回测量后的尺寸。</p>
<h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><p>使用<code>list</code>方法可以创建无需列表，第一个参数是一个由各项文字组成的数组，后续参数可以指定横纵坐标。</p>
<p>可以通过嵌套数组创建嵌套列表</p>
<h3 id="富文本"><a href="#富文本" class="headerlink" title="富文本"></a>富文本</h3><p>在<code>text</code>的选项参数里面参数<code>continued</code>为<code>true</code>，可以生成连续的文字</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">doc.<span class="title function_">fillColor</span>(<span class="string">&#x27;red&#x27;</span>).<span class="title function_">text</span>(<span class="string">&#x27;123&#x27;</span>, &#123; <span class="attr">continued</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">  .<span class="title function_">fillColor</span>(<span class="string">&#x27;green&#x27;</span>).<span class="title function_">text</span>(<span class="string">&#x27;456&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><img src="http://image.oldzhou.cn/FlohKekaDPiBLfLmIkpf5QZR89lW"></p>
<h3 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h3><p>PDFKit默认支持14种字体，使用<code>font</code>方法可以直接使用字符串指定这14种字体：</p>
<ul>
<li>‘Courier’</li>
<li>‘Courier-Bold’</li>
<li>‘Courier-Oblique’</li>
<li>‘Courier-BoldOblique’</li>
<li>‘Helvetica’</li>
<li>‘Helvetica-Bold’</li>
<li>‘Helvetica-Oblique’</li>
<li>‘Helvetica-BoldOblique’</li>
<li>‘Symbol’</li>
<li>‘Times-Roman’</li>
<li>‘Times-Bold’</li>
<li>‘Times-Italic’</li>
<li>‘Times-BoldItalic’</li>
<li>‘ZapfDingbats’</li>
</ul>
<p>除了这14种字体，PEFKit也支持外嵌字体，支持的字体格式有<code>.ttf</code>&#x2F;<code>.otf</code>&#x2F;<code>.ttc</code>&#x2F;<code>.dfont</code></p>
<p>在默认情况下，PDFKit是<strong>不支持中文</strong>的，所以需要上传包含中文的字体并指定，下载了开源的思源宋体并上传到文件夹中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">doc.<span class="title function_">font</span>(<span class="string">&#x27;./fonts/Source-Han.otf&#x27;</span>);</span><br><span class="line"></span><br><span class="line">doc.<span class="title function_">text</span>(<span class="string">&#x27;你好&#x27;</span>);</span><br><span class="line">doc.<span class="title function_">text</span>(<span class="string">&#x27;你也好&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>PDFKit也支持注册字体，这样就不必每次使用字体时都输入一大串的路径名了：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册字体</span></span><br><span class="line">doc.<span class="title function_">registerFont</span>(<span class="string">&#x27;source font&#x27;</span>,<span class="string">&#x27;./fonts/Source-Han.otf&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用字体</span></span><br><span class="line">doc.<span class="title function_">font</span>(<span class="string">&#x27;source font&#x27;</span>);</span><br><span class="line"></span><br><span class="line">doc.<span class="title function_">text</span>(<span class="string">&#x27;你好&#x27;</span>);</span><br><span class="line">doc.<span class="title function_">text</span>(<span class="string">&#x27;你也好&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="图像"><a href="#图像" class="headerlink" title="图像"></a>图像</h3><p>通过<code>image</code>方法来创建图像，图像的形式可以是路径、buffer对象、BASE64编码后的data uri。<strong>PDFKit支持<code>JPEG</code>和<code>PNG</code>格式</strong></p>
<p>如果没有提供<code>X</code>&#x2F;<code>Y</code>参数，图像会在当前文字流的位置（在最后一行文字后）渲染。如果提供了坐标，图像会在指定的位置渲染。</p>
<p><code>image</code>方法可配置的参数有：</p>
<ul>
<li><code>width</code>&#x2F;<code>height</code>，指定图像的宽高，当都未指定时会按照图片的实际尺寸渲染，如果指定了某一方向的尺寸，图像会按照指定方向的尺寸按原比例缩放，如果都指定了，图像会拉伸至指定尺寸</li>
<li><code>sacle</code>，对图像进行缩放</li>
<li><code>fit</code>，接受一个数组，图像以这个数组提供的宽度和高度中较小的尺寸进行缩放（类似CSS的<code>background-size</code>的<code>contain</code>属性），会留白</li>
<li><code>cover</code>，接受一个数组，图像以这个数组提供的宽度和高度中较大的尺寸进行缩放（类似CSS的<code>background-size</code>的<code>cover</code>属性），会剪切</li>
</ul>
<p><img src="http://image.oldzhou.cn/FlTa2RQUmatR2mxjGxYk4mQG5V1-"></p>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>PDF中的注释是具有可交互特性的文字，比如可点击的链接、注释或者高亮、下划线、删除线等文字样式。支持的注释有：</p>
<p><img src="http://image.oldzhou.cn/FmhmIgKC8zb_csCziYnBeIHM7L55"></p>
<p>要注意的是，这些文字样式都不是直接加载文字上，而是以矩形的方式覆盖到文字上。所以使用的时候需要使用<code>widthOfString</code>计算出要添加注释的文字的宽度，使用<code>currentLineHeight</code>计算出当前的行高。</p>
<p>还要注意注释的堆栈顺序，比如添加<code>link</code>，需要保证<code>link</code>是最后一个被添加的，否则会被其他的注释覆盖，导致无法点击。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Add the link text</span></span><br><span class="line">doc.<span class="title function_">fontSize</span>(<span class="number">25</span>)</span><br><span class="line">   .<span class="title function_">fillColor</span>(<span class="string">&#x27;blue&#x27;</span>)</span><br><span class="line">   .<span class="title function_">text</span>(<span class="string">&#x27;This is a link!&#x27;</span>, <span class="number">20</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Measure the text</span></span><br><span class="line"><span class="keyword">const</span> width = doc.<span class="title function_">widthOfString</span>(<span class="string">&#x27;This is a link!&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> height = doc.<span class="title function_">currentLineHeight</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add the underline and link annotations</span></span><br><span class="line">doc.<span class="title function_">underline</span>(<span class="number">20</span>, <span class="number">0</span>, width, height, &#123;<span class="attr">color</span>: <span class="string">&#x27;blue&#x27;</span>&#125;)</span><br><span class="line">   .<span class="title function_">link</span>(<span class="number">20</span>, <span class="number">0</span>, width, height, <span class="string">&#x27;http://google.com/&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>对于比较常用的链接、下划线，可以直接在<code>text</code>方法的选项中添加，更为方便：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">doc.<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">  .<span class="title function_">fillColor</span>(<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">  .<span class="title function_">text</span>(<span class="string">&#x27;Another link!&#x27;</span>, <span class="number">20</span>, <span class="number">0</span>, &#123;</span><br><span class="line">      <span class="attr">link</span>: <span class="string">&#x27;http://apple.com/&#x27;</span>,</span><br><span class="line">      <span class="attr">underline</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>

<h2 id="pdfmake"><a href="#pdfmake" class="headerlink" title="pdfmake"></a>pdfmake</h2><p>后来又发现了<a target="_blank" rel="noopener" href="https://github.com/bpampuch/pdfmake">PDFMake</a>，它是基于PDFKit的基础上做的封装，可以直接生成表格，神器一个，方便极了（本来想借着做项目的机会，在PDFKit的基础上封装一个做表格的轮子，这下省了）。文档在<a target="_blank" rel="noopener" href="https://pdfmake.github.io/docs/">这里</a>。</p>
<p>它也支持浏览器端的使用，暂时先不管它，来看Node端的使用。</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i pdfmake -S</span><br></pre></td></tr></table></figure>

<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>不想再像pdfKit把文档在过一遍了，<a target="_blank" rel="noopener" href="https://pdfmake.github.io/docs/">官网在这里</a>，<a target="_blank" rel="noopener" href="https://github.com/bpampuch/pdfmake/tree/master/examples">Gihutb的仓库里</a>上也给出了一系列的例子和结果展示，还有<a target="_blank" rel="noopener" href="http://pdfmake.org/playground.html">可在线编辑的例子</a>。官网的文档并不是很详细，具体的API和用法可以再上面的两个例子里找到。</p>
<p>pdfmake基本上把pdfkit链式调用的API改为了面向对象（？）的API，其实就是传入一个大对象作为参数，然后就没有然后了，PDF就生成了。</p>
<p>直接看例子吧，我要生成的DEMO是这样的：</p>
<p><img src="http://image.oldzhou.cn/FoO-Ir5HZ4L3pQ2-8mkztiE3BJpd"></p>
<p><img src="http://image.oldzhou.cn/FliCkx15NIvWJu8mTiqD5gdwPk8E"></p>
<p>从上到下一点点来吧</p>
<h3 id="主流程"><a href="#主流程" class="headerlink" title="主流程"></a>主流程</h3><p>它的使用方法和PDFKit类似，都是需要新建一个文档的实例，然后传入一个参数对象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">PdfPrinter</span> = <span class="built_in">require</span>(<span class="string">&#x27;pdfmake&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="keyword">const</span> printer = <span class="keyword">new</span> <span class="title class_">PdfPrinter</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数对象</span></span><br><span class="line"><span class="keyword">const</span> docDefinition = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pdfDoc = printer.<span class="title function_">createPdfKitDocument</span>(docDefinition);</span><br><span class="line"></span><br><span class="line">pdfDoc.<span class="title function_">pipe</span>(fs.<span class="title function_">createWriteStream</span>(<span class="string">`document-<span class="subst">$&#123;<span class="built_in">Date</span>.now()&#125;</span>.pdf`</span>));</span><br><span class="line">pdfDoc.<span class="title function_">end</span>();</span><br></pre></td></tr></table></figure>

<p>按照这个流程就可以生成一个空白的PDF文档，我们要做的就是编辑<code>docDefinition</code>这个对象，添加PDF的内容，<code>docDefinition</code>中可以添加的属性有：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> docDefinition = &#123;</span><br><span class="line">  <span class="attr">content</span>: [],</span><br><span class="line">  defaultStyle,</span><br><span class="line">  styles,</span><br><span class="line">  watermark</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><code>content</code>是一个数组，其中的每一个对象元素（或者是字符串）都代表要添加到PDF的一项内容，<code>defaultStyle</code>是文档的默认样式设置，<code>styles</code>是注册样式，定义在这个对象中的样式就可以直接在添加内容时的<code>style</code>属性使用，利用样式的复用，<code>watermark</code>用来给文档添加水印。</p>
<p>这些这是我这个DEMO中用到的内容，可以根据实际情况改变。</p>
<p>接下来要做的就是一些文档的准备工作。</p>
<h3 id="字体-1"><a href="#字体-1" class="headerlink" title="字体"></a>字体</h3><p>pdfMake默认支持的字体和PDFKit是相同的，也就是说也不支持中文字体，需要手动引入包含中文的字体（一般中文字体包都在10M以上，所以这也是这个方案在浏览器端使用的一个很难解决的问题）</p>
<p>手动引入字体的方法是在新建实例的时候参数一个字体定义的对象，每一个属性对应一种字体，每个字体又有<code>bold</code>&#x2F;<code>normal</code>&#x2F;<code>italics</code>&#x2F;<code>bolditalics</code>几种预设的分类，也是根据需要引入。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入字体</span></span><br><span class="line"><span class="keyword">const</span> fonts = &#123;</span><br><span class="line">  <span class="attr">sourceHan</span>: &#123;</span><br><span class="line">    <span class="attr">normal</span>: <span class="string">&#x27;./fonts/Source-Han.otf&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title class_">PingFangSC</span>: &#123;</span><br><span class="line">    <span class="attr">normal</span>: <span class="string">&#x27;./fonts/PingFang-SC-Regular.ttf&#x27;</span>,</span><br><span class="line">    <span class="attr">bold</span>: <span class="string">&#x27;./fonts/PingFang-SC-Bold.ttf&#x27;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="keyword">const</span> printer = <span class="keyword">new</span> <span class="title class_">PdfPrinter</span>(font);</span><br></pre></td></tr></table></figure>

<h3 id="默认样式"><a href="#默认样式" class="headerlink" title="默认样式"></a>默认样式</h3><p>在<code>default</code>定义默认样式，会应用到全局，可以被单独定义的样式覆盖：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局样式</span></span><br><span class="line"><span class="keyword">const</span> defaultStyle = &#123;</span><br><span class="line">  <span class="attr">font</span>: <span class="string">&#x27;PingFangSC&#x27;</span>,</span><br><span class="line">  <span class="attr">fontSize</span>: <span class="number">10</span>,</span><br><span class="line">  <span class="attr">color</span>: <span class="variable constant_">FONT_COLOR</span>,</span><br><span class="line">  <span class="attr">lineHeight</span>: <span class="number">1.2</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="注册预置样式"><a href="#注册预置样式" class="headerlink" title="注册预置样式"></a>注册预置样式</h3><p>实际上这个步骤应该是一边添加内容一边完成的，将能复用的样式提出来，放到这里，也便于后期维护：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 预置样式</span></span><br><span class="line"><span class="keyword">const</span> styles = &#123;</span><br><span class="line">  <span class="attr">tableTitle</span>: &#123; <span class="attr">fontSize</span>: <span class="number">20</span>, <span class="attr">margin</span>: [<span class="number">0</span>, <span class="number">20</span>, <span class="number">0</span>, <span class="number">10</span>], <span class="attr">bold</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  <span class="attr">tableHeader</span>: &#123; <span class="attr">bold</span>: <span class="literal">true</span>, <span class="attr">fontSize</span>: <span class="number">12</span>, <span class="attr">color</span>: <span class="variable constant_">TABLE_HEAD_COLOR</span> &#125;,</span><br><span class="line">  <span class="attr">dangerLabel</span>: &#123; <span class="attr">lineHeight</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;#F14D58&#x27;</span>, <span class="attr">background</span>: <span class="string">&#x27;#F2E6E7&#x27;</span> &#125;,</span><br><span class="line">  <span class="attr">dangerText</span>: &#123; <span class="attr">lineHeight</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;#F14D58&#x27;</span> &#125;,</span><br><span class="line">  <span class="attr">safeLabel</span>: &#123; <span class="attr">lineHeight</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;#34BA3B&#x27;</span>, <span class="attr">background</span>: <span class="string">&#x27;#E1F8E9&#x27;</span> &#125;,</span><br><span class="line">  <span class="attr">safeText</span>: &#123; <span class="attr">lineHeight</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;#34BA3B&#x27;</span>, &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>使用的时候只需要在<code>style</code>选项中使用属性名即可：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">text</span>: <span class="string">&#x27;检测项&#x27;</span>, <span class="attr">style</span>: <span class="string">&#x27;tableHeader&#x27;</span> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="水印"><a href="#水印" class="headerlink" title="水印"></a>水印</h3><p>可以使用<code>watermark</code>选项添加水印，可以定义的包括颜色、家族、透明度、文本等：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  水印</span></span><br><span class="line"><span class="keyword">const</span> watermark = &#123;</span><br><span class="line">  <span class="attr">text</span>: <span class="string">&#x27;隐私信息管理平台&#x27;</span>,</span><br><span class="line">  <span class="attr">color</span>: <span class="string">&#x27;#EEE&#x27;</span>,</span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">0.1</span>,</span><br><span class="line">  <span class="attr">bold</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>水印的尺寸是不能直接设置的，它会默认从文档左下到右上，在版本更新之前，如果想要调整水印尺寸，那么有一个hack的办法，就是为水印的文本添加空格，用不可见的空格占据空间：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  水印</span></span><br><span class="line"><span class="keyword">const</span> watermark = &#123;</span><br><span class="line">  <span class="attr">text</span>: <span class="string">&#x27;     隐私信息管理平台     &#x27;</span>,</span><br><span class="line">  <span class="attr">color</span>: <span class="string">&#x27;#EEE&#x27;</span>,</span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">0.1</span>,</span><br><span class="line">  <span class="attr">bold</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><img src="http://image.oldzhou.cn/FtDqgX2AtSt8RgemNVjVr_Q4vN8t"></p>
<p>搞定这些后，来为文档添加具体的内容。</p>
<h3 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h3><p>首先生成最上方的标题中的文字</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 标题</span></span><br><span class="line"><span class="keyword">const</span> titleIntro = &#123;</span><br><span class="line">  <span class="attr">text</span>: <span class="string">&#x27;小米隐私信息管理平台&#x27;</span>,</span><br><span class="line">  <span class="attr">fontSize</span>: <span class="number">28</span>,</span><br><span class="line">  <span class="attr">bold</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">alignment</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>选项中设定了字体尺寸并且加粗，如果设定了加粗，但是导入的字体中没有设定加粗对应的字体就会报错，然后通过<code>alignment</code>设定文本居中。</p>
<p>标题前面还有一个小图标，用文本来搞定，引入图片后，默认图片和标题会分行防止，解决方法就是对图片添加<code>absolutePosition</code>选项，相当于CSS的绝对定位，输入坐标值，就可以让图标脱离文档流，随意摆放：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 标题图标</span></span><br><span class="line"><span class="keyword">const</span> titleImage = &#123;</span><br><span class="line">  <span class="attr">image</span>: <span class="string">&#x27;./images/mi-logo.png&#x27;</span>,</span><br><span class="line">  <span class="attr">width</span>: <span class="number">40</span>,</span><br><span class="line">  <span class="attr">absolutePosition</span>: &#123; <span class="attr">x</span>: <span class="number">98</span>, <span class="attr">y</span>: <span class="number">40</span> &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>下方的报告名“隐私检测报告”和前面的标题设定基本一致，居中防止，但是为了设定上下间距需要设定<code>margin</code>选项</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 报告名</span></span><br><span class="line"><span class="keyword">const</span> titleLineY = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> titleText = &#123;</span><br><span class="line">  <span class="attr">text</span>: <span class="string">&#x27;隐私检测报告&#x27;</span>,</span><br><span class="line">  <span class="attr">fontSize</span>: <span class="number">38</span>,</span><br><span class="line">  <span class="attr">alignment</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">  <span class="attr">margin</span>: [<span class="number">0</span>, titleLineY],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h3><p>标题下方还有一道分割线，需要使用<code>canvas</code>选项来画出这条线：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 标题分割线</span></span><br><span class="line"><span class="keyword">const</span> titleLine = &#123;</span><br><span class="line">  <span class="attr">canvas</span>: [&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;line&#x27;</span>,</span><br><span class="line">    <span class="attr">x1</span>: <span class="number">0</span>, <span class="attr">y1</span>: titleLineY,</span><br><span class="line">    <span class="attr">x2</span>: <span class="number">500</span>, <span class="attr">y2</span>: titleLineY,</span><br><span class="line">    <span class="attr">lineColor</span>: <span class="variable constant_">LINE_COLOR</span></span><br><span class="line">  &#125;],</span><br><span class="line">  <span class="attr">margin</span>: [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">20</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>通过更改<code>type</code>可以画出不同的图形，其余的设置都好理解。</p>
<h3 id="概览信息"><a href="#概览信息" class="headerlink" title="概览信息"></a>概览信息</h3><p>下面有一堆概览信息，由于原型图没有用列表形式的小点，说以不能直接使用<code>ul</code>选项，直接添加文字即可，将这部分内容放到一个数组中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 概览信息</span></span><br><span class="line"><span class="keyword">const</span> data = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="string">&#x27;0de3a12b-20190611174750&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;浏览器&#x27;</span>,</span><br><span class="line">  <span class="attr">appVersion</span>: <span class="string">&#x27;8.9.2&#x27;</span>,</span><br><span class="line">  <span class="attr">deviceName</span>: <span class="string">&#x27;chiron&#x27;</span>,</span><br><span class="line">  <span class="attr">miuiVersion</span>: <span class="string">&#x27;MIUI 9 SPT-2019.05.15&#x27;</span>,</span><br><span class="line">  <span class="attr">developer</span>: <span class="string">&#x27;马化腾&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> id = <span class="string">`编号: <span class="subst">$&#123;data.id&#125;</span>`</span>;</span><br><span class="line"><span class="keyword">const</span> name = <span class="string">`软件名称: <span class="subst">$&#123;data.name&#125;</span>`</span>;</span><br><span class="line"><span class="keyword">const</span> appVersion = <span class="string">`版本号: <span class="subst">$&#123;data.appVersion&#125;</span>`</span>;</span><br><span class="line"><span class="keyword">const</span> deviceName = <span class="string">`测试机型: <span class="subst">$&#123;data.deviceName&#125;</span>`</span>;</span><br><span class="line"><span class="keyword">const</span> miuiVersion = <span class="string">`操作系统: <span class="subst">$&#123;data.miuiVersion&#125;</span>`</span>;</span><br><span class="line"><span class="keyword">const</span> developer = <span class="string">`开发者: <span class="subst">$&#123;data.developer&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> overview = [id, name, appVersion, deviceName, miuiVersion, developer];</span><br></pre></td></tr></table></figure>

<h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h3><p>表格的标题没什么特别的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 隐私信息检测标题</span></span><br><span class="line"><span class="keyword">const</span> privacyDetailTitle = &#123;</span><br><span class="line">  <span class="attr">text</span>: <span class="string">&#x27;隐私信息将策详情&#x27;</span>,</span><br><span class="line">  <span class="attr">style</span>: <span class="string">&#x27;tableTitle&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>表格的整体配置如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 隐私信息监测表格</span></span><br><span class="line"><span class="keyword">const</span> privacyDetailTable = &#123;</span><br><span class="line">  <span class="attr">table</span>: &#123;</span><br><span class="line">    <span class="attr">headerRows</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">widths</span>: [<span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;*&#x27;</span>],</span><br><span class="line">    <span class="attr">body</span>: [</span><br><span class="line">      privacyDetailTableHeader,</span><br><span class="line">      ...privacyDetailTableBody</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">layout</span>: tableLayout</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>如果表格分页时，会自动将在新的页面上再次生成表格，可以通过<code>headerRows</code>定义表格的前多少行作为表头被复制到新的页面，<code>width</code>定义的是表格每一列的宽度，有以下几种取值形式：</p>
<ul>
<li><code>&#39;*&#39;</code>：会自动扩展占满剩余的宽度，在它其中的内容不会换行</li>
<li><code>&#39;auto&#39;</code>：会根据内容自动确定宽度，其中的内容会换行，如果想不换行，需要设置<code>noWrap: true</code></li>
<li><code>50</code>：根据给定的数值确定宽度，注意是<code>Number</code>类型，不是字符串，否则会报错</li>
</ul>
<p>我的第一个表格希望这五列占满全部空间，并且平均分配，所以<code>widths</code>（注意有<code>s</code>）是<code>[&#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;]</code></p>
<p>我将表头单独拿出来定义：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 隐私信息监测表格-表头</span></span><br><span class="line"><span class="keyword">const</span> privacyDetailTableHeader = [</span><br><span class="line">  &#123; <span class="attr">text</span>: <span class="string">&#x27;检测项&#x27;</span>, <span class="attr">style</span>: <span class="string">&#x27;tableHeader&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">text</span>: <span class="string">&#x27;是否读取&#x27;</span>, <span class="attr">style</span>: <span class="string">&#x27;tableHeader&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">text</span>: <span class="string">&#x27;是否上传&#x27;</span>, <span class="attr">style</span>: <span class="string">&#x27;tableHeader&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">text</span>: <span class="string">&#x27;是否明文上传&#x27;</span>, <span class="attr">style</span>: <span class="string">&#x27;tableHeader&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">text</span>: <span class="string">&#x27;检测结果&#x27;</span>, <span class="attr">style</span>: <span class="string">&#x27;tableHeader&#x27;</span> &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p>表头用<code>style</code>属性指定了使用我在前面注册的<code>tableHeader</code>的样式。</p>
<p>具体表格内容则根据数据动态生成，我的DMO做了一些假数据，和表头一起放到<code>body</code>里面，构成了一个二维数组</p>
<p>最后是<code>layout</code>选项，它用来定义表格单元格和表格的边框，它有几个预设值<code>noBorders</code>&#x2F;<code>headerLineOnly</code>&#x2F;<code>lightHorizontalLines</code>，也可以传入一个对象对表格的样式自定义：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 表格样式</span></span><br><span class="line"><span class="keyword">const</span> tableLayout = &#123;</span><br><span class="line">  <span class="title function_">hLineWidth</span>(<span class="params">i, node</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">vLineWidth</span>(<span class="params">i, node</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">hLineColor</span>(<span class="params">i, node</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable constant_">LINE_COLOR</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">vLineColor</span>(<span class="params">i, node</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable constant_">LINE_COLOR</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">paddingLeft</span>(<span class="params">i, node</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">5</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>传入了一些方法，设定对应的样式，除此之外还可以设置<code>fillColor</code>等，具体的参考<a target="_blank" rel="noopener" href="https://github.com/bpampuch/pdfmake/blob/master/examples/tables.js">官方的例子吧</a>。</p>
<p>这样就可以完成一个表格，另外一个表格知识宽度和内容不同。</p>
<p>最后将所有内容放到生成<code>createPdfKitDocument</code>参数对象中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数对象</span></span><br><span class="line"><span class="keyword">const</span> docDefinition = &#123;</span><br><span class="line">  <span class="attr">content</span>: [</span><br><span class="line">    titleImage,</span><br><span class="line">    titleIntro,</span><br><span class="line">    titleText,</span><br><span class="line">    titleLine,</span><br><span class="line">    overview,</span><br><span class="line">    privacyDetailTitle,</span><br><span class="line">    privacyDetailTable,</span><br><span class="line">    permissionDetailTitle,</span><br><span class="line">    permissionDetailTable,</span><br><span class="line">  ],</span><br><span class="line">  defaultStyle,</span><br><span class="line">  styles,</span><br><span class="line">  watermark</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pdfDoc = printer.<span class="title function_">createPdfKitDocument</span>(docDefinition);</span><br></pre></td></tr></table></figure>

<p>一份排版还算精美、代码复杂度也可以接受的PDF文档就生成了。</p>
<p>不仅如此，pdfmake还可以包括了生成二维码等功能，确实非常方便。</p>
<p>上面的完整的代码在<a target="_blank" rel="noopener" href="https://github.com/duola8789/node-learning/tree/master/demo7">我的Github仓库中</a>。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>PDFKit可以在Node环境和浏览器环境使用：</p>
<ul>
<li>优点：引入字体后支持中文，支持图片，支持缩放、旋转，生成的PDF文字可复制，功能比较强大，API与操作Canvas的API非常类似，有一些使用的方法帮助快速操作，可以生成可点击的链接；</li>
<li>缺点是样式控制需要使用手动控制，不方便且繁琐，如果PDF的布局复杂时（有表格）样式控制也会很复杂。所以比较适合于布局简单的、没有复杂表格、布局以大块内容分割的PDF的生成，或者以现有的API抽象出生成表格等方法，便于复用。</li>
</ul>
<p>pdfmake是在PDFKit基础上封装的：</p>
<ul>
<li>优点：提供了直接绘制表格的API，功能比较强大，使用方便，还提供了添加水印、生成二维码等功能，生成较复杂的PDF的代码量可以接受</li>
<li>缺点是调试比较麻烦，每次都需要生成PDF查看样式，样式语法错误一般也不会报错，知识不生效，还有就是如果样式多了维护还是有一点麻烦，可使用类似LESS编写样式的思路。</li>
</ul>
<p>总的来说，如果需要在Node服务端生成可复制的PDF文件，推荐使用pdfmake。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="http://pdfkit.org/">pdfKit</a></li>
<li><a target="_blank" rel="noopener" href="https://pdfmake.github.io/docs/">pdfmake</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/bpampuch/pdfmake/tree/master/examples">bpampuch&#x2F;pdfmake@Gtihub</a></li>
<li><a target="_blank" rel="noopener" href="http://pdfmake.org/playground.html">playground@pdfmake</a></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/PDF/" rel="tag"># PDF</a>
              <a href="/tags/PDFKit/" rel="tag"># PDFKit</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2019/06/12/01%20%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/04%20Vue/01%20Vue%E5%9F%BA%E7%A1%80/Vue%E5%9F%BA%E7%A1%8020%20%E6%8D%A2%E8%A1%8C%E7%9A%84%E5%A4%84%E7%90%86/" rel="prev" title="Vue基础20 换行的处理">
                  <i class="fa fa-chevron-left"></i> Vue基础20 换行的处理
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2019/06/17/03%20%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/04%20%E4%BC%98%E8%BE%BE%E5%AD%A6%E5%9F%8E/01%20%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93%E4%BC%98%E5%8C%96/" rel="next" title="01 浏览器渲染优化">
                  01 浏览器渲染优化 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  
  <div class="comments">
    <script src="https://giscus.app/client.js"
        data-repo="duola8789/duola8789.github.io" 
        data-repo-id="R_kgDOIyKHdQ" 
        data-category="Announcements"
        data-category-id="DIC_kwDOIyKHdc4CTown"
        data-mapping="pathname" 
        data-reactions-enabled="1" 
        data-emit-metadata="0" 
        data-theme="light"
        data-lang="zh-C"
        crossorigin="anonymous"
        data-input-position="bottom"
        data-loading="lazy"
        async>
    </script>
  </div>
  
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">多啦大薯片</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
